<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>リアルタイムフォント変換と検索</title>
    <style>
        body {
            font-family: Arial, sans-serif;
        }
        .output {
            margin-top: 20px;
            font-family: FangSong, serif;
            font-size: 24px;
        }
        .textbox {
            width: 100%;
            padding: 10px;
            font-size: 18px;
        }
        .results {
            margin-top: 20px;
            border: 1px solid #ccc;
            padding: 10px;
            background: #f9f9f9;
        }
        .result-item {
            margin: 10px 0;
        }
    </style>
</head>
<body>
    <h1>リアルタイムでFangSongフォントに変換※指定する場合半角スペースを置くこと</h1>
    <h6>#w : wikipedia / #y : YouTube</h6>
    <h6>#n : ニコニコ / #g : Google / #y : Yahoo</h6>
    <input type="text" class="textbox" id="inputText" placeholder="ここに文字を入力してください">
    
    <div class="output" id="outputText"></div>
    <div class="results" id="results"></div>

    <script>
        const inputText = document.getElementById('inputText');
        const outputText = document.getElementById('outputText');
        const resultsContainer = document.getElementById('results');

        inputText.addEventListener('input', async function() {
            const text = inputText.value;
            outputText.textContent = text;

            // 結果をクリア
            resultsContainer.innerHTML = '';

            // キーワードによる処理
            if (text.startsWith('#w ')) {
                const query = text.slice(3);
                const wikipediaData = await searchWikipedia(query);
                displayResults(wikipediaData);
            } else if (text.startsWith('#y ')) {
                const query = text.slice(3);
                const youtubeData = await searchYouTube(query);
                displayResults(youtubeData);
            } else if (text.startsWith('#n ')) {
                const query = text.slice(3);
                const nicovideoData = await searchNicoNico(query);
                displayResults(nicovideoData);
            } else if (text.startsWith('#g ')) {
                const query = text.slice(3);
                const googleData = await searchGoogle(query);
                displayResults(googleData);
            } else if (text.startsWith('#yahoo ')) {
                const query = text.slice(7);
                const yahooData = await searchYahoo(query);
                displayResults(yahooData);
            }
        });

        // Wikipedia検索
        async function searchWikipedia(query) {
            const response = await fetch(`https://ja.wikipedia.org/w/api.php?action=query&format=json&list=search&srsearch=${encodeURIComponent(query)}&origin=*`);
            const data = await response.json();
            return data.query.search.map(item => ({
                title: item.title,
                snippet: item.snippet
            }));
        }

        // YouTube検索
        async function searchYouTube(query) {
            const apiKey = 'YOUR_YOUTUBE_API_KEY'; // YouTube Data APIのAPIキーをここに入れてください
            const response = await fetch(`https://www.googleapis.com/youtube/v3/search?part=snippet&q=${encodeURIComponent(query)}&key=${apiKey}`);
            const data = await response.json();
            return data.items.map(item => ({
                title: item.snippet.title,
                url: `https://www.youtube.com/watch?v=${item.id.videoId}`
            }));
        }

        // ニコニコ動画検索
        async function searchNicoNico(query) {
            const response = await fetch(`https://api.search.nicovideo.jp/api/v1/search?keyword=${encodeURIComponent(query)}`);
            const data = await response.json();
            return data.data.map(item => ({
                title: item.title,
                url: item.url
            }));
        }

        // Google検索
        async function searchGoogle(query) {
            const response = await fetch(`https://www.googleapis.com/customsearch/v1?q=${encodeURIComponent(query)}&key=YOUR_GOOGLE_API_KEY&cx=YOUR_CX_CODE`); // Google Custom Search APIのAPIキーとCXを入れてください
            const data = await response.json();
            return data.items.map(item => ({
                title: item.title,
                link: item.link
            }));
        }

        // Yahoo検索
        async function searchYahoo(query) {
            const response = await fetch(`https://search.yahooapis.com/search/web/v1/search?query=${encodeURIComponent(query)}&format=json&appid=YOUR_YAHOO_APP_ID`); // Yahoo Search APIのApp IDを入れてください
            const data = await response.json();
            return data.query.results.map(item => ({
                title: item.title,
                link: item.link
            }));
        }

        // 検索結果の表示
        function displayResults(data) {
            if (!data || data.length === 0) {
                resultsContainer.innerHTML = '<p>結果が見つかりませんでした。</p>';
                return;
            }

            data.forEach(item => {
                const resultItem = document.createElement('div');
                resultItem.className = 'result-item';
                if (item.url) {
                    resultItem.innerHTML = `<a href="${item.url}" target="_blank">${item.title}</a>`;
                } else if (item.link) {
                    resultItem.innerHTML = `<a href="${item.link}" target="_blank">${item.title}</a>`;
                } else {
                    resultItem.innerHTML = `<h4>${item.title}</h4><p>${item.snippet || ''}</p>`;
                }
                resultsContainer.appendChild(resultItem);
            });
        }
    </script>
</body>
</html>
